<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find a Doctor - Doctor Wallet</title>
    <link rel="icon" type="image/png" sizes="32x32" href="icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Medical Gradient Background */
        .medical-gradient {
            background: linear-gradient(135deg, #0ea5e9 0%, #10b981 25%, #6366f1 50%, #8b5cf6 75%, #0ea5e9 100%);
            background-size: 400% 400%;
            animation: gradientFlow 20s ease infinite;
        }
        
        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            25% { background-position: 50% 25%; }
            50% { background-position: 100% 50%; }
            75% { background-position: 50% 75%; }
        }
        
        /* Navigation Shadow */
        .nav-shadow {
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .nav-shadow.scrolled {
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
        }
        
        /* Card Hover Effects */
        .card-hover {
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        /* Button Animation */
        .btn-animate {
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .btn-animate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        /* Search Bar Focus */
        .search-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }
        
        /* Modal Animation */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 1rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Loading Animation */
        .spinner {
            border: 3px solid rgba(59, 130, 246, 0.2);
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #667eea);
            background-size: 300% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientText 4s linear infinite;
        }
        
        @keyframes gradientText {
            to { background-position: 300% center; }
        }
        
        /* Animate on Scroll */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Doctor Badge */
        .doctor-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 600;
        }
        
        .staff-badge {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 600;
        }
        
        /* Empty State */
        .empty-state {
            opacity: 0;
            animation: fadeInUp 0.6s ease forwards;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white fixed w-full top-0 z-50 nav-shadow">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center gap-3 cursor-pointer">
                        <img src="iconbgr_b.png" alt="Doctor Wallet Logo" class="h-10 w-auto">
                        <h1 class="text-2xl font-bold gradient-text">Doctor Wallet</h1>
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="index.html" class="text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium">Home</a>
                        <a href="index.html#about" class="text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium">About</a>
                        <a href="index.html#features" class="text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium">Features</a>
                        <a href="index.html#contact" class="text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium">Contact</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-20 medical-gradient text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
            <div class="text-center">
                <h1 class="text-5xl md:text-6xl font-bold mb-6">Find a Doctor</h1>
                <p class="text-xl md:text-2xl mb-4 font-light">Search our network of healthcare professionals</p>
                <p class="text-lg opacity-90 max-w-2xl mx-auto">Connect with qualified doctors and staff members registered in our system</p>
            </div>
        </div>
    </section>

    <!-- Search and Directory Section -->
    <section class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Search Bar -->
            <div class="mb-8 animate-on-scroll">
                <div class="max-w-2xl mx-auto">
                    <div class="relative">
                        <input 
                            type="text" 
                            id="searchInput" 
                            placeholder="Search by name, specialty, or location..." 
                            class="w-full px-6 py-4 rounded-lg border-2 border-gray-200 focus:border-blue-500 search-input text-lg"
                        >
                        <div class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filter Tabs -->
            <div class="flex justify-center gap-4 mb-8 flex-wrap animate-on-scroll">
                <button onclick="filterResults('all')" class="filter-btn bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold btn-animate">
                    All
                </button>
                <button onclick="filterResults('doctor')" class="filter-btn bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-semibold btn-animate">
                    Doctors
                </button>
                <button onclick="filterResults('staff')" class="filter-btn bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-semibold btn-animate">
                    Staff
                </button>
            </div>

            <!-- Loading State -->
            <div id="loadingState" class="text-center py-12">
                <div class="spinner mx-auto"></div>
                <p class="mt-4 text-gray-600">Loading healthcare professionals...</p>
            </div>

            <!-- Results Grid -->
            <div id="resultsGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" style="display: none;">
                <!-- Cards will be populated here -->
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="text-center py-12 empty-state" style="display: none;">
                <div class="text-6xl mb-4">üîç</div>
                <h3 class="text-2xl font-semibold text-gray-900 mb-2">No Results Found</h3>
                <p class="text-gray-600">Try adjusting your search criteria</p>
            </div>
        </div>
    </section>

    <!-- Modal -->
    <div id="doctorModal" class="modal">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-3xl font-bold text-gray-900" id="modalName"></h2>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-3xl leading-none">
                        &times;
                    </button>
                </div>
                
                <div id="modalContent" class="space-y-4">
                    <!-- Content will be populated here -->
                </div>
                
                <div class="mt-6 flex justify-end">
                    <button onclick="closeModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold btn-animate">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-gray-400">&copy; 2025 Doctor Wallet. All rights reserved.</p>
        </div>
    </footer>

    <script>
        let allData = [];
        let currentFilter = 'all';

        // Fetch data from PHP API
        async function fetchDoctors() {
            try {
                const response = await fetch('get_doctors.php');
                const data = await response.json();
                
                if (data.success) {
                    allData = data.data;
                    displayResults(allData);
                    document.getElementById('loadingState').style.display = 'none';
                    document.getElementById('resultsGrid').style.display = 'grid';
                    
                    setTimeout(() => {
                        document.querySelectorAll('.animate-on-scroll').forEach(el => {
                            el.classList.add('visible');
                        });
                    }, 100);
                } else {
                    showError(data.message);
                }
            } catch (error) {
                console.error('Error fetching data:', error);
                showError('Failed to load data. Please try again later.');
            }
        }

        // Display results
        function displayResults(data) {
            const grid = document.getElementById('resultsGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (data.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            grid.style.display = 'grid';
            emptyState.style.display = 'none';
            
            grid.innerHTML = data.map((item, index) => `
                <div class="bg-white rounded-lg shadow-md p-6 card-hover animate-on-scroll" style="transition-delay: ${index * 0.1}s" onclick='openModal(${JSON.stringify(item).replace(/'/g, "&#39;")})'>
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex items-center gap-3">
                            <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-2xl font-bold">
                                ${item.name.charAt(0).toUpperCase()}
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-gray-900">${item.name}</h3>
                                <span class="${item.type === 'doctor' ? 'doctor-badge' : 'staff-badge'}">
                                    ${item.type === 'doctor' ? 'üë®‚Äç‚öïÔ∏è Doctor' : 'üë• Staff'}
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-2">
                        ${item.specialty ? `
                            <div class="flex items-center gap-2 text-gray-600">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                                </svg>
                                <span>${item.specialty}</span>
                            </div>
                        ` : ''}
                        
                        ${item.phone ? `
                            <div class="flex items-center gap-2 text-gray-600">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                </svg>
                                <span>${item.phone}</span>
                            </div>
                        ` : ''}
                        
                        ${item.email ? `
                            <div class="flex items-center gap-2 text-gray-600">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                </svg>
                                <span>${item.email}</span>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <button class="text-blue-600 hover:text-blue-800 font-semibold text-sm">
                            View Details ‚Üí
                        </button>
                    </div>
                </div>
            `).join('');
            
            setTimeout(() => {
                document.querySelectorAll('.animate-on-scroll').forEach(el => {
                    el.classList.add('visible');
                });
            }, 100);
        }

        // Open modal
        function openModal(data) {
            const modal = document.getElementById('doctorModal');
            const modalName = document.getElementById('modalName');
            const modalContent = document.getElementById('modalContent');
            
            modalName.textContent = data.name;
            
            modalContent.innerHTML = `
                <div class="bg-gradient-to-br from-blue-50 to-purple-50 p-6 rounded-lg">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-3xl font-bold">
                            ${data.name.charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900">${data.name}</h3>
                            <span class="${data.type === 'doctor' ? 'doctor-badge' : 'staff-badge'}">
                                ${data.type === 'doctor' ? 'üë®‚Äç‚öïÔ∏è Doctor' : 'üë• Staff Member'}
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-4 mt-6">
                    ${data.specialty ? `
                        <div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg">
                            <svg class="w-6 h-6 text-blue-600 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                            </svg>
                            <div>
                                <p class="font-semibold text-gray-900">Specialty</p>
                                <p class="text-gray-600">${data.specialty}</p>
                            </div>
                        </div>
                    ` : ''}
                    
                    ${data.phone ? `
                        <div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg">
                            <svg class="w-6 h-6 text-green-600 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                            </svg>
                            <div>
                                <p class="font-semibold text-gray-900">Contact Number</p>
                                <p class="text-gray-600">${data.phone}</p>
                                <a href="tel:${data.phone}" class="text-blue-600 hover:text-blue-800 text-sm font-medium mt-1 inline-block">
                                    üìû Call Now
                                </a>
                            </div>
                        </div>
                    ` : ''}
                    
                    ${data.email ? `
                        <div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg">
                            <svg class="w-6 h-6 text-purple-600 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                            <div>
                                <p class="font-semibold text-gray-900">Email</p>
                                <p class="text-gray-600">${data.email}</p>
                                <a href="mailto:${data.email}" class="text-blue-600 hover:text-blue-800 text-sm font-medium mt-1 inline-block">
                                    ‚úâÔ∏è Send Email
                                </a>
                            </div>
                        </div>
                    ` : ''}
                    
                    ${data.address ? `
                        <div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg">
                            <svg class="w-6 h-6 text-red-600 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <div>
                                <p class="font-semibold text-gray-900">Address</p>
                                <p class="text-gray-600">${data.address}</p>
                            </div>
                        </div>
                    ` : ''}
                    
                    ${data.clinic_name ? `
                        <div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg">
                            <svg class="w-6 h-6 text-teal-600 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                            </svg>
                            <div>
                                <p class="font-semibold text-gray-900">Clinic</p>
                                <p class="text-gray-600">${data.clinic_name}</p>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close modal
        function closeModal() {
            const modal = document.getElementById('doctorModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Filter results
        function filterResults(type) {
            currentFilter = type;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-blue-600', 'text-white');
            
            let filtered = allData;
            if (type !== 'all') {
                filtered = allData.filter(item => item.type === type);
            }
            
            displayResults(filtered);
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            
            let filtered = allData;
            if (currentFilter !== 'all') {
                filtered = allData.filter(item => item.type === currentFilter);
            }
            
            if (searchTerm) {
                filtered = filtered.filter(item => 
                    item.name.toLowerCase().includes(searchTerm) ||
                    (item.specialty && item.specialty.toLowerCase().includes(searchTerm)) ||
                    (item.address && item.address.toLowerCase().includes(searchTerm))
                );
            }
            
            displayResults(filtered);
        });

        // Show error
        function showError(message) {
            document.getElementById('loadingState').innerHTML = `
                <div class="text-center py-12">
                    <div class="text-6xl mb-4">‚ö†Ô∏è</div>
                    <h3 class="text-2xl font-semibold text-gray-900 mb-2">Error</h3>
                    <p class="text-gray-600">${message}</p>
                </div>
            `;
        }

        // Close modal on outside click
        document.getElementById('doctorModal').addEventListener('click', (e) => {
            if (e.target.id === 'doctorModal') {
                closeModal();
            }
        });

        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.animate-on-scroll').forEach(el => {
                observer.observe(el);
            });
        });

        // Navigation scroll effect
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('nav');
            if (window.pageYOffset > 100) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Initialize
        fetchDoctors();
    </script>
</body>
</html>